<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muse AI - Speak with the Masters</title>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Code Highlighting Library -->
    <link rel="stylesheet" href="lib/highlight/styles/github-dark.min.css" id="hljs-theme">
    <script src="lib/highlight/highlight.min.js"></script>
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="src/css/main.css">
    <!-- Main Application Logic (defer and module for modern JS) -->
    <script src="src/js/main.js" type="module" defer></script>
</head>
<body>

    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar" id="sidebar">
            <header class="sidebar-header">
                <button class="new-chat-btn" id="new-chat-btn" aria-label="Start a new chat">
                    <i class="fas fa-plus"></i>
                    <span>New Chat</span>
                </button>
                <button class="sidebar-toggle-btn" id="sidebar-toggle-close" aria-label="Collapse sidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </header>
            <nav class="chat-history-container">
                <ul class="chat-history-list" id="chat-history-list">
                    <!-- Chat history items will be dynamically inserted here -->
                </ul>
            </nav>
            <footer class="sidebar-footer">
                <button id="theme-toggle-btn" class="sidebar-action-btn" aria-label="Toggle theme">
                    <i class="fas fa-sun"></i>
                </button>
                <button id="settings-btn" class="sidebar-action-btn" aria-label="Open settings">
                    <i class="fas fa-cog"></i>
                </button>
            </footer>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <header class="main-header">
                <button class="sidebar-toggle-btn" id="sidebar-toggle-open" aria-label="Open sidebar">
                    <i class="fas fa-bars"></i>
                </button>
            </header>
            
            <!-- Character Selection View -->
            <section class="character-selector view" id="character-selector">
                <div class="selector-header">
                    <h1 class="font-title-1">Muse AI</h1>
                    <p class="font-body">Choose your muse to begin a conversation.</p>
                </div>
                <div class="character-grid" id="character-grid">
                    <!-- Character cards will be dynamically generated by JS -->
                </div>
            </section>

            <!-- Chat View (hidden by default) -->
            <section class="chat-view view" id="chat-view" hidden>
                <header class="chat-header">
                    <div class="character-info">
                        <img id="chat-header-avatar" src="" alt="" class="avatar">
                        <h2 id="chat-character-name" class="font-title-2"></h2>
                    </div>
                    <button class="bio-btn" id="bio-btn">
                        <i class="fas fa-book"></i> Biography
                    </button>
                </header>
                <div class="message-list" id="message-list">
                    <!-- Message bubbles will be dynamically inserted here -->
                </div>
                <footer class="chat-input-area">
                    <div class="input-wrapper">
                        <textarea id="chat-input" placeholder="Message..." rows="1" aria-label="Chat input"></textarea>
                        <button id="send-btn" class="send-btn" aria-label="Send message">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <div id="input-error-msg" class="input-error-msg" hidden>API Key is required.</div>
                    </div>
                </footer>
            </section>
        </main>
    </div>

    <!-- Modals (pop-ups) container -->
    <!-- Biography Modal -->
    <div class="modal-backdrop" id="bio-modal-backdrop" hidden>
        <div class="modal" id="bio-modal" role="dialog" aria-modal="true" aria-labelledby="bio-modal-title">
            <header class="modal-header">
                <h3 id="bio-modal-title" class="font-title-2">Biography</h3>
                <button class="close-modal-btn" id="close-bio-modal-btn" aria-label="Close biography">&times;</button>
            </header>
            <div class="modal-body">
                <p id="bio-modal-content"></p>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-backdrop" id="settings-modal-backdrop" hidden>
        <div class="modal" id="settings-modal" role="dialog" aria-modal="true" aria-labelledby="settings-modal-title">
            <header class="modal-header">
                <h3 id="settings-modal-title" class="font-title-2">Settings</h3>
                <button class="close-modal-btn" id="close-settings-modal-btn" aria-label="Close settings">&times;</button>
            </header>
            <div class="modal-body">
                <div class="settings-group">
                    <label for="api-provider-select">AI Provider</label>
                    <select id="api-provider-select">
                        <option value="chatgpt">ChatGPT (OpenAI)</option>
                        <option value="gemini" disabled>Gemini (Coming Soon)</option>
                        <option value="claude" disabled>Claude (Coming Soon)</option>
                        <option value="deepseek" disabled>DeepSeek (Coming Soon)</option>
                        <option value="custom">Custom (OpenAI-compatible)</option>
                    </select>
                </div>
                <div class="settings-group" id="custom-api-url-group" hidden>
                    <label for="custom-api-url">API Endpoint URL</label>
                    <input type="url" id="custom-api-url" placeholder="https://api.example.com/v1/chat/completions">
                </div>
                <div class="settings-group">
                    <label for="api-key-input">API Key</label>
                    <input type="password" id="api-key-input" placeholder="Enter your API Key here">
                </div>
                <div class="settings-group">
                    <label for="model-name-input">Model Name</label>
                    <input type="text" id="model-name-input" placeholder="e.g., gpt-4-turbo">
                    <small>Leave empty for provider default (gpt-3.5-turbo).</small>
                </div>
            </div>
            <footer class="modal-footer">
                <button id="save-settings-btn" class="save-btn">Save and Apply</button>
            </footer>
        </div>
    </div>

</body>
</html>
